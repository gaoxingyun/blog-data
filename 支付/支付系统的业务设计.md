---
title: 支付系统的业务设计
date: 2017-10-19 14:56:31
categories: 
- 支付
tags:
- 支付
- java
---

#### 名词

###### 支付相关

- 支付通道 通道指的是接口服务，如各渠道的直连支付通道，易宝支付，汇付天下等。
- 支付渠道 渠道指的是支付方式，如支付宝，微信，银联，京东，qq，applepay等。
- 支付类型 扫码支付（C扫B），刷卡支付（B扫C），H5支付，退款，撤销，代付，代扣等。 

###### 清算相关

- T0 当天
- T1 第二个工作日
- D0 当天
- D1 第二天
- S0 秒到


###### 账务相关

- 平台成本  即渠道对平台的手续费
- 平台收入  即平台对商户的手续费
- 平台利润  即平台收入-平台成本
- 代理商分润 及 平台对代理商下商户手续费 - 平台对代理商手续费


#### 支付系统枚举量

###### 支付渠道

###### 支付通道

###### 支付类型

- 支付类型极少变动，可以使用枚举量写入代码中。

```java

```



#### 支付系统

##### 支付交易订单生命周期

- 初始态订单存入缓存中（如redis），定期将超时的订单转化为终止态，并将其移出缓存，存入数据库中。

- 订单初始态不可持久化，订单达到终止态后订单状态不可再变化。

###### 订单初始态

- 订单预创建
- 订单支付中

###### 订单完成态

- 订单支付完成
- 订单部分退款

###### 订单终止态

- 订单已全额退款
- 订单已关闭
- 订单已撤销


##### 系统分层

- 对外API
- 内部接口
- 渠道






#### 文章

- [大众点评支付渠道网关系统的实践之路](https://zhuanlan.zhihu.com/p/21752960)
