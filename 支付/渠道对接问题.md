---
title: 渠道对接问题
date: 2017-03-23 19:52:01
categories: 
- 支付
tags:
- 支付
- 架构
- java
---


# 问题

- 支付宝当面付预下单之后如果用户不扫描二维码，调用关闭订单，会报订单不存在
  如果你调用的是当面付预下单接口(alipay.trade.precreate)，调用成功后订单实际上是没有生成，因为创建一笔订单要买家、卖家、金额三要素。预下单并没有创建订单，所以根据商户订单号操作订单，比如查询或者关闭，会报错订单不存在。当用户扫码后订单才会创建，用户扫码之前二维码有效期2小时，扫码之后有效期根据timeout_express时间指定


- 银联退款可能会出现退款金额大于原订单金额，所以需要系统进行退款金额控制